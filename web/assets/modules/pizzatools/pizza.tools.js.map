{"version":3,"sources":["/modules/pizzatools/pizza.tools.es"],"names":[],"mappings":"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","file":"/modules/pizzatools/pizza.tools.es","sourcesContent":["/**\r\n * --------------------------------------------------------\r\n * witch js 工具类，包含前台字符串、cookie、图片缩放，特殊字符过滤等操作\r\n * @Version 0.5\r\n * @Author: 左盐(huabinglan@163.com)\r\n * @Date: 14-2-12 下午3:16\r\n * --------------------------------------------------------\r\n */\r\nimport \"babel-polyfill/dist/polyfill.min.js\";\r\nimport superagent from 'superagent/superagent';\r\nimport layer from 'vue-layer';\r\nvar $ = require('jquery');\r\nvar pizzalayer = require('pizzalayer');\r\nvar tools = (function() {\r\n    let self = {};\r\n    /**\r\n     * http请求\r\n     * @method httpAgent\r\n     * @param  {[type]}  url    [description]\r\n     * @param  {[type]}  method [description]\r\n     * @param  {[type]}  data   [description]\r\n     * @return {[type]}         [description]\r\n     */\r\n    self.httpAgent = (url, method = 'get', data = '') => {\r\n         layer.loading(1);\r\n            method = method.toLowerCase();\r\n            if (method == \"get\" || method == \"del\") {\r\n                return new Promise(function(resolve, reject) {\r\n                    superagent[method].call(this, url).query(data).end(function(err, res) {\r\n                        if (err || !res.ok) {\r\n                            reject(err || res.ok);\r\n                        }\r\n                        resolve(res.body);\r\n                    });\r\n                });\r\n            } else {\r\n                return new Promise(function(resolve, reject) {\r\n                    superagent[method].call(this, url).send(data).end(function(err, res) {\r\n                        if (err || !res.ok) {\r\n                            reject(err || res.ok);\r\n                        }\r\n                        resolve(res.body);\r\n                    });\r\n                });\r\n            }\r\n        }\r\n        /**\r\n         * 获取随机数\r\n         * @param  {[type]} l [description]\r\n         * @return {[type]}   [description]\r\n         */\r\n    self.randomChar = function(l) { //获取l位随机数\r\n            var x = \"0123456789qwertyioplkjhgfsazxcvbnm\";\r\n            var tmp = \"\";\r\n            for (var i = 0; i < l; i++) {\r\n                tmp += x.charAt(Math.ceil(Math.random() * 100000000) % x.length);\r\n            }\r\n            return tmp;\r\n        }\r\n        /**\r\n         * 弹窗获取随机数，防止缓存\r\n         * @return {[type]} [description]\r\n         */\r\n    self.formRandom = function() {\r\n            return new Date().getTime();\r\n        }\r\n        /**\r\n         * 获取字符串长度，区分中英文\r\n         * @param  {[type]} str [description]\r\n         * @return {[type]}     [description]\r\n         */\r\n    self.getCharLen = function(str) { //获取字符串长度，区分中英文\r\n        return str.replace(/[^\\x00-\\xff]/g, \"rr\").length;\r\n    }\r\n\r\n    self.subStr = function(s, l, st) { //截取字符串，区分中英文\r\n        var T = false;\r\n        if (tools.getCharLen(s) > l) {\r\n            st = st ? st : '';\r\n            l -= tools.getCharLen(st);\r\n            var S = escape(s);\r\n            var M = S.length;\r\n            var r = '';\r\n            var C = 0;\r\n            for (var i = 0; i < M; i++) {\r\n                if (C < l) {\r\n                    var t = S.charAt(i);\r\n                    if (t == '%') {\r\n                        t = S.charAt(i + 1);\r\n                        if (t == 'u') {\r\n                            r += S.substring(i, i + 6);\r\n                            C += 2;\r\n                            i += 5;\r\n                        } else {\r\n                            r += S.substring(i, i + 3);\r\n                            C++;\r\n                            i += 2;\r\n                        }\r\n                    } else {\r\n                        r += t;\r\n                        C++;\r\n                    }\r\n                } else {\r\n                    T = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return T ? unescape(r) + st : s;\r\n    }\r\n\r\n    self.xss = function(siteurl, options) { //前端过滤\r\n        var defaults = {\r\n            removeHtml: true, //清除html标签\r\n            removeEnter: true //移除换行\r\n        };\r\n\r\n        var options = $.extend(defaults, options);\r\n\r\n        siteurl = siteurl.replace(/<(script|link|style|iframe)(.|\\n)*\\/\\1>\\s*/ig, \"\"); //过滤危险标签\r\n        siteurl = siteurl.replace(/[ | ]*\\n/g, '\\n'); //去除行尾空白\r\n        siteurl = siteurl.replace(/\"/g, '”').replace(/\"/g, \"“\"); //替换英文引号为中文引号\r\n        siteurl = siteurl.replace(/\\'/g, \"‘\"); //替换英文单引号为中文单引号\r\n\r\n        if (options.removeHtml == true) {\r\n            siteurl = siteurl.replace(/<\\/?(?!br|\\/)[^>]*>/g, ''); //去除HTML tag//(/<\\/?(?!br|/?p|img)[^>]*>/g,'');\r\n        }\r\n        if (options.removeEnter == true) {\r\n            siteurl = siteurl.replace(/(\\n)/g, \"\").replace(/(\\t)/g, \"\").replace(/(\\r)/g, \"\"); //过滤回车\r\n        } else {\r\n            siteurl = siteurl.replace(/(\\n)/g, \"<br/>\").replace(/(\\t)/g, \"\").replace(/(\\r)/g, \"<br/>\"); //过滤回车\r\n        }\r\n\r\n        return siteurl;\r\n    }\r\n\r\n    self.getPara = function(name) { //获取url的参数\r\n        var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\");\r\n        var r = window.location.search.substr(1).match(reg);\r\n        if (r != null) return unescape(r[2]);\r\n        return '';\r\n    }\r\n\r\n    self.subTime = function(time1, time2) { //计算时间差time2-time1，返回时间差的毫秒数\r\n        var t1 = new Date(time1),\r\n            t2;\r\n        if (time2 == undefined) {\r\n            t2 = new Date(); //当前时间\r\n        } else {\r\n            t2 = new Date(time2);\r\n        }\r\n        return (t2.getTime() - t1.getTime()) / 1000; //时间差的秒数\r\n    }\r\n\r\n    //时间格式化\r\n    self.formatTime = function(fmt) { // (new Date()).Format(\"yyyy-MM-dd hh:mm:ss.S\") ==> 2006-07-02 08:09:04.423\r\n            // (new Date()).Format(\"yyyy-M-d h:m:s.S\")      ==> 2006-7-2 8:9:4.18\r\n            var t = new Date();\r\n            var o = {\r\n                \"M+\": t.getMonth() + 1, //月份\r\n                \"d+\": t.getDate(), //日\r\n                \"h+\": t.getHours(), //小时\r\n                \"m+\": t.getMinutes(), //分\r\n                \"s+\": t.getSeconds(), //秒\r\n                \"q+\": Math.floor((t.getMonth() + 3) / 3), //季度\r\n                \"S\": t.getMilliseconds() //毫秒\r\n            };\r\n            if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (t.getFullYear() + \"\").substr(4 - RegExp.$1.length));\r\n            for (var k in o)\r\n                if (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\r\n            return fmt;\r\n        }\r\n        /**\r\n         * 根据objectid获取时间\r\n         * @param  {[type]} ObjectId [description]\r\n         * @param  {[type]} fmt      [description]\r\n         * @return {[type]}          [description]\r\n         */\r\n    self.getObjectIdTime = function(ObjectId, fmt) {\r\n            var time = parseInt(ObjectId.substring(0, 8), 16);\r\n            var t = new Date(time * 1000);\r\n            var o = {\r\n                \"M+\": t.getMonth() + 1, //月份\r\n                \"d+\": t.getDate(), //日\r\n                \"h+\": t.getHours(), //小时\r\n                \"m+\": t.getMinutes(), //分\r\n                \"s+\": t.getSeconds(), //秒\r\n                \"q+\": Math.floor((t.getMonth() + 3) / 3), //季度\r\n                \"S\": t.getMilliseconds() //毫秒\r\n            };\r\n            if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (t.getFullYear() + \"\").substr(4 - RegExp.$1.length));\r\n            for (var k in o)\r\n                if (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\r\n            return fmt;\r\n        }\r\n        /**\r\n         * 根据objectid获取时间\r\n         * @param  {[type]} ObjectId [description]\r\n         * @param  {[type]} fmt      [description]\r\n         * @return {[type]}          [description]\r\n         */\r\n    self.formatUnixTime = function(unixTime, fmt) {\r\n            var t = new Date(unixTime * 1000);\r\n            var o = {\r\n                \"M+\": t.getMonth() + 1, //月份\r\n                \"d+\": t.getDate(), //日\r\n                \"h+\": t.getHours(), //小时\r\n                \"m+\": t.getMinutes(), //分\r\n                \"s+\": t.getSeconds(), //秒\r\n                \"q+\": Math.floor((t.getMonth() + 3) / 3), //季度\r\n                \"S\": t.getMilliseconds() //毫秒\r\n            };\r\n            if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (t.getFullYear() + \"\").substr(4 - RegExp.$1.length));\r\n            for (var k in o)\r\n                if (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\r\n            return fmt;\r\n        }\r\n        /**\r\n         * 获取cookie\r\n         * @param  {[type]} c    [description]\r\n         * @param  {[type]} name [description]\r\n         * @return {[type]}      [description]\r\n         */\r\n    self.getCookie = function(name) {\r\n            var v = \"0\";\r\n            var t = document.cookie;\r\n            var us = t.split(';');\r\n            for (var i = 0; i < us.length; i++) {\r\n                if ($.trim(us[i].split('=')[0]) == name) {\r\n                    v = decodeURIComponent(us[i].split('=')[1]);\r\n                    break;\r\n                }\r\n            }\r\n            return v;\r\n        }\r\n        //设置cookie，不推荐使用，请在服务器端设置cookie，如需本地存储，请使用本地化存储插件pizza.ui.store.js\r\n    self.setCookie = function(c, s, d) {\r\n            var v = c + '=' + s;\r\n            v += d ? '; max-age=' + (d * 24 * 60 * 60) : '';\r\n            document.cookie = v + \";path=/\";\r\n        }\r\n        /**\r\n         * 书架csrf参数\r\n         * @param  {[type]} option [description]\r\n         * @return {[type]}        [description]\r\n         */\r\n    self.getCsrf = function(options) {\r\n        var defaults = {\r\n            _csrf: '',\r\n            isparent: false\r\n        }\r\n        options = $.extend(defaults, options);\r\n        if (options.isparent === true) {\r\n            return '&_csrf=' + parent.$('#csrf').val();\r\n        }\r\n        return '&_csrf=' + $('#csrf').val();\r\n    }\r\n\r\n    return self;\r\n\r\n\r\n\r\n}());\r\n\r\nmodule.exports = tools;\r\n"]}